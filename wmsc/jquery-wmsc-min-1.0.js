/*
 * desenvolvidor por Welison Menezes
 * welisonmenezes@gmail.com
 */
(function(e){e.fn.wmsc=function(n){var r=e(this);var i={auto:true,bullets:{show:true,num_bullets:true},draggable:false,interval:4e3,item:{h:150,w:250},pag:{show:true,labels:{p:"Prev",n:"Next"}},pause_hover:true,speed:800,vertical:false,visible:1};var s=e.extend(true,i,n);t.init_wmsc(r,s)};var t={init_wmsc:function(e,n){var r=t.get_el(e,n);t.add_bullet_pag(e,n,r);if(n.pag.show==true)t.add_pagination(e,n,r);if(n.vertical==false)t.style_horizontal(e,n,r);if(n.vertical==true)t.style_vertical(e,n,r);if(n.draggable==true&&n.vertical==false)t.drag_horizontal(e,n,r);if(n.draggable==true&&n.vertical==true)t.drag_vertical(e,n,r);t.set_default(e,n,r);t.temp_auto(e,n,r)},temp_auto:function(e,n,r){if(n.auto===true){var i=window.setInterval(function(){if(n.vertical==false)t.next_horizontal(e,n,r);if(n.vertical==true)t.next_vertical(e,n,r)},n.interval);if(n.pause_hover===true){e.hover(function(){window.clearTimeout(i)},function(){i=window.setInterval(function(){if(n.vertical==false)t.next_horizontal(e,n,r);if(n.vertical==true)t.next_vertical(e,n,r)},n.interval)})}}},set_default:function(e,t,n){n.first.addClass("item_active")},add_bullet_pag:function(n,r,i){if(r.bullets.show==true)var s='<div class="wmsc_bullets" style="position:absolute; z-index:11;" >';if(r.bullets.show==false)var s='<div class="wmsc_bullets" style="position:absolute; z-index:11; display:none !important;" >';if(r.bullets.num_bullets===true){for(var o=0;o<i.new_len;o++){if(o==0){s+='<span class="wmsc_active" style="float: left; margin-right:3px;" rel="'+(o+1)+'" >'+(o+1)+"</span>"}else{s+='<span style="float: left; margin-right:3px;" rel="'+(o+1)+'" >'+(o+1)+"</span>"}}}else{for(var o=0;o<i.new_len;o++){if(o==0){s+='<span style="float: left; margin-right:3px;" class="wmsc_active" rel="'+(o+1)+'" ></span>'}else{s+='<span style="float: left; margin-right:3px;" rel="'+(o+1)+'" ></span>'}}}s+="</div>";e(s).appendTo(i.full);t.bullet_pag(n,r,i)},bullet_pag:function(n,r,i){n.delegate("div.wmsc_bullets > span","click",function(){var s=e(this).attr("rel");if(r.vertical==false)t.nav_bullet_horizontal(n,r,i,s);if(r.vertical==true)t.nav_bullet_vertical(n,r,i,s)})},add_pagination:function(n,r,i){var s='<div class="wmsc_pag">';s+='<div class="wmsc_prev" style="position:absolute; z-index:12;">'+r.pag.labels.p+"</div>";s+='<div class="wmsc_next" style="position:absolute; z-index:12;">'+r.pag.labels.n+"</div>";s+="</div>";e(s).appendTo(i.el);t.pagination(n,r,i)},pagination:function(e,n,r){e.delegate("div.wmsc_pag div.wmsc_prev","click",function(){if(n.vertical==false)t.prev_horizontal(e,n,r);if(n.vertical==true)t.prev_vertical(e,n,r)});e.delegate("div.wmsc_pag div.wmsc_next","click",function(){if(n.vertical==false)t.next_horizontal(e,n,r);if(n.vertical==true)t.next_vertical(e,n,r)})},next_horizontal:function(n,r,s){var o=s.box.width()-s.ani-r.item.w;var u=e("div.wmsc_bullets span.wmsc_active",n).attr("rel");var a=s.ani*u-r.item.w*r.visible;var f=r.item.w*s.len;var l=f-r.item.w*r.visible;u=u-1;if(a>=l){s.box.stop().animate({left:"0px"},r.speed);i=0;t.get_active(n,r,s,i);return false}else if(a+r.item.w==l){s.box.stop().animate({left:"-"+(a+r.item.w)+"px"},r.speed);i=u+1;t.get_active(n,r,s,i);return false}else if(a<=f){s.box.stop().animate({left:"-"+(a+r.item.w*r.visible)+"px"},r.speed);i=u+1;t.get_active(n,r,s,i);return false}return false},next_vertical:function(n,r,s){var o=s.box.height()-s.ani_v-r.item.h;var u=e("div.wmsc_bullets span.wmsc_active",n).attr("rel");var a=s.ani_v*u-r.item.h*r.visible;var f=r.item.h*s.len;var l=f-r.item.h*r.visible;u=u-1;if(a>=l){s.box.stop().animate({top:"0px"},r.speed);i=0;t.get_active(n,r,s,i);return false}else if(a+r.item.h==l){s.box.stop().animate({top:"-"+(a+r.item.h)+"px"},r.speed);i=u+1;t.get_active(n,r,s,i);return false}else if(a<=f){s.box.stop().animate({top:"-"+(a+r.item.h*r.visible)+"px"},r.speed);i=u+1;t.get_active(n,r,s,i);return false}return false},prev_horizontal:function(n,r,s){var o=s.box.width()-s.ani-r.item.w;var u=e("div.wmsc_bullets span.wmsc_active",n).attr("rel");var a=s.ani*u-r.item.w*r.visible;var f=r.item.w*s.len;var l=f-r.item.w*r.visible;u=u-1;if(a==0){s.box.stop().animate({left:"-"+l+"px"},r.speed);i=u-1;t.get_active(n,r,s,i);return false}else if(a<=f){s.box.stop().animate({left:"-"+(a-r.item.w*r.visible)+"px"},r.speed);i=u-1;t.get_active(n,r,s,i);return false}return false},prev_vertical:function(n,r,s){var o=s.box.height()-s.ani_v-r.item.h;var u=e("div.wmsc_bullets span.wmsc_active",n).attr("rel");var a=s.ani_v*u-r.item.h*r.visible;var f=r.item.h*s.len;var l=f-r.item.h*r.visible;u=u-1;if(a==0){s.box.stop().animate({top:"-"+l+"px"},r.speed);i=u-1;t.get_active(n,r,s,i);return false}else if(a<=f){s.box.stop().animate({top:"-"+(a-r.item.h*r.visible)+"px"},r.speed);i=u-1;t.get_active(n,r,s,i);return false}return false},nav_bullet_horizontal:function(n,r,i,s){var o=e("div.wmsc_bullets span.wmsc_active",n).attr("rel");var u=i.ani*s-r.item.w*r.visible;var a=r.item.w*i.len;var f=a-r.item.w*r.visible;if(e(this).hasClass("wmsc_active")){return false}else if(f<u){i.box.stop().animate({left:"-"+f+"px"},r.speed);t.get_active(n,r,i,s-1)}else if(u<a&&s>o){i.box.stop().animate({left:"-"+u+"px"},r.speed);t.get_active(n,r,i,s-1)}else if(u<a&&s<o){i.box.stop().animate({left:"-"+u+"px"},r.speed);t.get_active(n,r,i,s-1)}return false},nav_bullet_vertical:function(n,r,i,s){var o=e("div.wmsc_bullets span.wmsc_active",n).attr("rel");var u=i.ani_v*s-r.item.h*r.visible;var a=r.item.h*i.len;var f=a-r.item.h*r.visible;if(e(this).hasClass("wmsc_active")){return false}else if(f<u){i.box.stop().animate({top:"-"+f+"px"},r.speed);t.get_active(n,r,i,s-1)}else if(u<a&&s>o){i.box.stop().animate({top:"-"+u+"px"},r.speed);t.get_active(n,r,i,s-1)}else if(u<a&&s<o){i.box.stop().animate({top:"-"+u+"px"},r.speed);t.get_active(n,r,i,s-1)}return false},drag_horizontal:function(e,t,n){var r=n.itens.outerWidth();var i=n.len;n.box.draggable({scroll:false,axis:"x",iframeFix:true,start:function(e,t){return true},stop:function(e,s){var o=s.position.left;var u=(n.box.outerWidth()-r*t.visible)*-1;var a=i*r-r*t.visible;if(o*-1>=a){n.box.css({top:0,left:u+"px"})}if(o>1){n.box.css({left:"0px"})}return true}})},drag_vertical:function(e,t,n){var r=n.itens.outerHeight();var i=n.len;n.box.draggable({scroll:false,axis:"y",iframeFix:true,start:function(e,t){return true},stop:function(e,s){var o=s.position.top;var u=(n.box.outerHeight()-r*t.visible)*-1;var a=i*r-r*t.visible;if(o*-1>=a){n.box.css({left:0,top:u+"px"})}if(o>1){n.box.css({top:"0px"})}return true}})},get_active:function(t,n,r,i){var s=e("div.wmsc_bullets span.wmsc_active",t);e("div.wmsc_bullets span",t).removeClass("wmsc_active");e("div.wmsc_bullets span",t).eq(i).addClass("wmsc_active");return false},style_horizontal:function(e,t,n){n.el.css({display:"block",position:"relative","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none"});n.full.css({display:"block",height:t.item.h+"px",overflow:"hidden",position:"relative",width:t.item.w*t.visible+"px"});n.box.css({display:"block",height:t.item.h+"px",left:"0px",position:"absolute",top:"0px",width:t.item.w*n.len+"px","z-index":"10"});n.itens.css({display:"block","float":"left",height:t.item.h+"px",overflow:"hidden",width:t.item.w+"px"})},style_vertical:function(e,t,n){n.el.css({display:"block",position:"relative","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none"});n.full.css({display:"block",height:t.item.h*t.visible+"px",overflow:"hidden",position:"relative",width:t.item.w+"px"});n.box.css({display:"block",height:t.item.h*n.len+"px",left:"0px",position:"absolute",top:"0px",width:t.item.w+"px","z-index":"10"});n.itens.css({display:"block",height:t.item.h+"px",overflow:"hidden",width:t.item.w+"px"})},get_el:function(e,t){var e=e;var n=e.children().eq(0);var r=n.children().eq(0);var i=r.children();var s=i.eq(0);var o=i.length;var u=Math.round(o/t.visible);var a=t.item.w*t.visible;var f=t.item.h*t.visible;var l={el:e,full:n,box:r,itens:i,first:s,len:o,ani:a,ani_v:f,new_len:u};return l}}})(jQuery)